"use strict";(globalThis["webpackChunkraiden_dapp"]=globalThis["webpackChunkraiden_dapp"]||[]).push([[256],{37718:(t,e,s)=>{s.r(e),s.d(e,{default:()=>N});var i=s(28508),o=s(55429),a=s(50948),n=s(19021),r=s(3950),c=s(53892),l=s(56357),d=function(){var t=this,e=t.$createElement,d=t._self._c||e;return d("div",{staticClass:"backup-state",attrs:{"data-cy":"backup_state"}},[d(c.Z,{attrs:{"no-gutters":""}},[d(i.Z,{staticClass:"backup-state__description",attrs:{cols:"12"}},[t._v(" "+t._s(t.$t("backup-state.description"))+" ")])],1),d(a.Z,{staticClass:"backup-state__buttons"},[d(l.Z,{attrs:{color:"#ea6464",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[d("div",t._g({},t.isConnected?null:i),[d(n.Z,{staticClass:"backup-state__buttons__download-state",attrs:{disabled:!t.isConnected,"data-cy":"backup_state_buttons_download_state"},on:{click:function(e){t.downloadState=!0}}},[d("div",{staticClass:"backup-state__buttons__download-state__icon",class:{"backup-state__buttons__download-state__icon disabled-icon":!t.isConnected}},[d(o.Z,{attrs:{src:s(87227)}})],1),d(r.km,[d("div",{staticClass:"backup-state__buttons__download-state__title"},[t._v(" "+t._s(t.$t("backup-state.download"))+" ")])])],1)],1)]}}])},[d("span",[t._v(t._s(t.$t("backup-state.disabled-download")))])]),d(l.Z,{attrs:{color:"#ea6464",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[d("div",t._g({},t.isConnected?i:null),[d(n.Z,{staticClass:"backup-state__buttons__upload-state",attrs:{disabled:t.isConnected},on:{click:function(e){t.uploadState=!0}}},[d("div",{staticClass:"backup-state__buttons__upload-state__icon",class:{"backup-state__buttons__upload-state__icon disabled-icon":t.isConnected}},[d(o.Z,{attrs:{src:s(46568)}})],1),d(r.km,[d("div",{staticClass:"backup-state__buttons__upload-state__title"},[t._v(" "+t._s(t.$t("backup-state.upload"))+" ")])])],1)],1)]}}])},[d("span",[t._v(t._s(t.$t("backup-state.disabled-upload")))])])],1),d("download-state-dialog",{attrs:{visible:t.downloadState},on:{cancel:function(e){t.downloadState=!1}}}),d("upload-state-dialog",{attrs:{visible:t.uploadState},on:{cancel:function(e){t.uploadState=!1}}})],1)},h=[],u=s(59312),p=s(57102),f=s(77382),g=s(23399),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("raiden-dialog",{staticClass:"download-state",attrs:{visible:t.visible},on:{close:t.cancel}},[i(g.EB,[t._v(" "+t._s(t.$t("backup-state.download"))+" ")]),i(g.ZB,[i(o.Z,{staticClass:"download-state__warning my-4",attrs:{src:s(70019)}}),i("span",[t._v(t._s(t.$t("backup-state.download-warning")))])],1),i(g.h7,[i("action-button",{staticClass:"download-state__button",attrs:{"data-cy":"download_state_button","full-width":"",enabled:!!t.href,href:t.href,download:t.filename,text:t.$t("backup-state.download-button")},on:{click:t.cancel}})],1)],1)},_=[],m=s(80300),b=s(7648),w=s(55093);let y=class extends((0,p.Wr)(w.Z)){constructor(){super(...arguments),this.href="",this.filename=""}cancel(){return!0}async onVisibilityChanged(t){t?(this.filename=`raiden_lc_state_${(new Date).toISOString()}.json`,this.href=await this.getStateFileURL(this.filename)):(this.href="",this.filename="")}async getStateFileURL(t){let e="[",s=0;for await(const o of this.$raiden.getDatabaseDump())e+=(s++?",\n":"\n")+JSON.stringify(o);e+="\n]";const i=new File([e],t,{type:"application/json"});return URL.createObjectURL(i)}};(0,u.__decorate)([(0,p.fI)({required:!0,type:Boolean,default:!1})],y.prototype,"visible",void 0),(0,u.__decorate)([(0,p.y1)()],y.prototype,"cancel",null),(0,u.__decorate)([(0,p.RL)("visible",{immediate:!0})],y.prototype,"onVisibilityChanged",null),y=(0,u.__decorate)([(0,p.wA)({components:{RaidenDialog:b.Z,ActionButton:m.Z}})],y);const k=y,C=k;var S=s(79917),D=(0,S.Z)(C,v,_,!1,null,"2a2a0f5c",null);const O=D.exports;var Z=s(97660),x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("raiden-dialog",{staticClass:"upload-state",attrs:{visible:t.visible},on:{close:t.cancel}},[s(g.EB,[t._v(t._s(t.$t("backup-state.upload")))]),t.dropzoneErrorMessage?s(g.ZB,[s(c.Z,{staticClass:"upload-state__error",attrs:{justify:"center","no-gutters":""}},[t._v(" "+t._s(t.$t("backup-state.upload-error"))+" ")])],1):t.uploadingStateProgress?s(g.h7,[s("spinner")],1):s(g.h7,[s("div",{staticClass:"upload-state__dropzone",class:{"upload-state__dropzone active-dropzone":t.activeDropzone},on:{dragenter:t.onDropzoneEnter,dragleave:t.onDropzoneLeave,dragover:function(t){t.preventDefault()},drop:t.onDropzoneDrop}},[s(c.Z,{staticClass:"upload-state__dropzone__icon",attrs:{justify:"center","no-gutters":""}},[s(Z.Z,{staticClass:"upload-state__dropzone__icon--inactive-dropzone",class:{"upload-state__dropzone__icon--active-dropzone":t.activeDropzone},attrs:{size:"90px"}},[t._v(" mdi-upload ")])],1),s(c.Z,{staticClass:"upload-state__dropzone__description",attrs:{justify:"center","no-gutters":""}},[t._v(" "+t._s(t.$t("backup-state.upload-drag-and-drop"))+" ")]),s(c.Z,{staticClass:"upload-state__dropzone__description",attrs:{justify:"center","no-gutters":""}},[t._v(" "+t._s(t.$t("backup-state.upload-divider"))+" ")]),s(c.Z,{staticClass:"upload-state__dropzone__button"},[s("input",{ref:"stateInput",attrs:{type:"file",hidden:""},on:{change:t.onFileSelect}}),s("action-button",{attrs:{enabled:!t.activeDropzone,text:t.$t("backup-state.upload-button")},on:{click:function(e){return t.$refs.stateInput.click()}}})],1)],1)])],1)},A=[],T=s(54928);let z=class extends((0,p.Wr)(w.Z)){constructor(){super(...arguments),this.dragCount=0,this.activeDropzone=!1,this.dropzoneErrorMessage=!1,this.uploadingStateProgress=!1}cancel(){return!0}onDropzoneEnter(t){t.preventDefault(),this.dragCount++,this.activeDropzone=!0}onDropzoneLeave(t){t.preventDefault(),this.dragCount--,this.dragCount<=0&&(this.activeDropzone=!1)}onDropzoneDrop(t){var e,s;if(t.preventDefault(),this.activeDropzone=!1,null===(e=t.dataTransfer)||void 0===e||!e.files)return;const i=null===(s=t.dataTransfer)||void 0===s?void 0:s.files;this.uploadState(i)}onFileSelect(t){if(!t.target.files)return;const e=t.target.files;this.uploadState(e)}dropzoneError(){this.uploadingStateProgress=!1,this.dropzoneErrorMessage=!0,setTimeout((()=>{this.dropzoneErrorMessage=!1}),2e3)}uploadState(t){t.length>1&&this.dropzoneError();let e=new FileReader;e.onload=t=>{const e=t.target;if(t.target)try{this.uploadingStateProgress=!0;const t=JSON.parse(String(e.result));this.$store.commit("backupState",t),setTimeout((async()=>{this.uploadingStateProgress=!1,this.navigateToHome()}),1e3)}catch(s){this.dropzoneError()}},e.readAsText(t[0])}};(0,u.__decorate)([(0,p.fI)({required:!0,type:Boolean,default:!1})],z.prototype,"visible",void 0),(0,u.__decorate)([(0,p.y1)()],z.prototype,"cancel",null),z=(0,u.__decorate)([(0,p.wA)({components:{RaidenDialog:b.Z,ActionButton:m.Z,Spinner:T.Z}})],z);const L=z,Y=L;var $=(0,S.Z)(Y,x,A,!1,null,"0b64d4b1",null);const W=$.exports;let B=class extends p.w3{constructor(){super(...arguments),this.downloadState=!1,this.uploadState=!1}};B=(0,u.__decorate)([(0,p.wA)({components:{DownloadStateDialog:O,UploadStateDialog:W},computed:{...(0,f.rn)(["isConnected"])}})],B);const I=B,E=I;var F=(0,S.Z)(E,d,h,!1,null,"fece32aa",null);const N=F.exports},56357:(t,e,s)=>{s.d(e,{Z:()=>h});var i=s(65932),o=s(98470),a=s(57684),n=s(23093),r=s(24826),c=s(64171),l=s(46611),d=s(61099);const h=(0,d.Z)(o.Z,a.Z,n.Z,r.Z).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},openOnFocus:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:t,content:e}=this.dimensions,s=!this.bottom&&!this.left&&!this.top&&!this.right,i=!1!==this.attach?t.offsetLeft:t.left;let o=0;return this.top||this.bottom||s?o=i+t.width/2-e.width/2:(this.left||this.right)&&(o=i+(this.right?t.width:-e.width)+(this.right?10:-10)),this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),`${this.calcXOverflow(o,this.dimensions.content.width)}px`},calculatedTop(){const{activator:t,content:e}=this.dimensions,s=!1!==this.attach?t.offsetTop:t.top;let i=0;return this.top||this.bottom?i=s+(this.bottom?t.height:-e.height)+(this.bottom?10:-10):(this.left||this.right)&&(i=s+t.height/2-e.height/2),this.nudgeTop&&(i-=parseInt(this.nudgeTop)),this.nudgeBottom&&(i+=parseInt(this.nudgeBottom)),!1===this.attach&&(i+=this.pageYOffset),`${this.calcYOverflow(i)}px`},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:(0,c.kb)(this.maxWidth),minWidth:(0,c.kb)(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick((()=>{this.value&&this.callActivate()}))},mounted(){"v-slot"===(0,c.sp)(this,"activator",!0)&&(0,l.N6)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const t=i.Z.options.methods.genActivatorListeners.call(this);return this.openOnFocus&&(t.focus=t=>{this.getActivator(t),this.runDelay("open")},t.blur=t=>{this.getActivator(t),this.runDelay("close")}),t.keydown=t=>{t.keyCode===c.Do.esc&&(this.getActivator(t),this.runDelay("close"))},t},genActivatorAttributes(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition(){const t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render(t){return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((()=>[this.genTransition()])),this.genActivator()])}})},24826:(t,e,s)=>{s.d(e,{Z:()=>d});var i=s(48477),o=s(43760),a=s(65932),n=s(58994),r=s(61099),c=s(64171);const l=(0,r.Z)(i.Z,(0,o.d)(["top","right","bottom","left","absolute"]),a.Z,n.Z),d=l.extend().extend({name:"menuable",props:{allowOverflow:Boolean,light:Boolean,dark:Boolean,maxWidth:{type:[Number,String],default:"auto"},minWidth:[Number,String],nudgeBottom:{type:[Number,String],default:0},nudgeLeft:{type:[Number,String],default:0},nudgeRight:{type:[Number,String],default:0},nudgeTop:{type:[Number,String],default:0},nudgeWidth:{type:[Number,String],default:0},offsetOverflow:Boolean,positionX:{type:Number,default:null},positionY:{type:Number,default:null},zIndex:{type:[Number,String],default:null}},data:()=>({activatorNode:[],absoluteX:0,absoluteY:0,activatedBy:null,activatorFixed:!1,dimensions:{activator:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0,offsetLeft:0},content:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0}},relativeYOffset:0,hasJustFocused:!1,hasWindow:!1,inputActivator:!1,isContentActive:!1,pageWidth:0,pageYOffset:0,stackClass:"v-menu__content--active",stackMinZIndex:6}),computed:{computedLeft(){const t=this.dimensions.activator,e=this.dimensions.content,s=(!1!==this.attach?t.offsetLeft:t.left)||0,i=Math.max(t.width,e.width);let o=0;if(o+=s,(this.left||this.$vuetify.rtl&&!this.right)&&(o-=i-t.width),this.offsetX){const e=isNaN(Number(this.maxWidth))?t.width:Math.min(t.width,Number(this.maxWidth));o+=this.left?-e:t.width}return this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),o},computedTop(){const t=this.dimensions.activator,e=this.dimensions.content;let s=0;return this.top&&(s+=t.height-e.height),!1!==this.attach?s+=t.offsetTop:s+=t.top+this.pageYOffset,this.offsetY&&(s+=this.top?-t.height:t.height),this.nudgeTop&&(s-=parseInt(this.nudgeTop)),this.nudgeBottom&&(s+=parseInt(this.nudgeBottom)),s},hasActivator(){return!!this.$slots.activator||!!this.$scopedSlots.activator||!!this.activator||!!this.inputActivator},absoluteYOffset(){return this.pageYOffset-this.relativeYOffset}},watch:{disabled(t){t&&this.callDeactivate()},isActive(t){this.disabled||(t?this.callActivate():this.callDeactivate())},positionX:"updateDimensions",positionY:"updateDimensions"},beforeMount(){this.hasWindow="undefined"!==typeof window,this.hasWindow&&window.addEventListener("resize",this.updateDimensions,!1)},beforeDestroy(){this.hasWindow&&window.removeEventListener("resize",this.updateDimensions,!1)},methods:{absolutePosition(){return{offsetTop:this.positionY||this.absoluteY,offsetLeft:this.positionX||this.absoluteX,scrollHeight:0,top:this.positionY||this.absoluteY,bottom:this.positionY||this.absoluteY,left:this.positionX||this.absoluteX,right:this.positionX||this.absoluteX,height:0,width:0}},activate(){},calcLeft(t){return(0,c.kb)(!1!==this.attach?this.computedLeft:this.calcXOverflow(this.computedLeft,t))},calcTop(){return(0,c.kb)(!1!==this.attach?this.computedTop:this.calcYOverflow(this.computedTop))},calcXOverflow(t,e){const s=t+e-this.pageWidth+12;return t=(!this.left||this.right)&&s>0?Math.max(t-s,0):Math.max(t,12),t+this.getOffsetLeft()},calcYOverflow(t){const e=this.getInnerHeight(),s=this.absoluteYOffset+e,i=this.dimensions.activator,o=this.dimensions.content.height,a=t+o,n=s<a;return n&&this.offsetOverflow&&i.top>o?t=this.pageYOffset+(i.top-o):n&&!this.allowOverflow?t=s-o-12:t<this.absoluteYOffset&&!this.allowOverflow&&(t=this.absoluteYOffset+12),t<12?12:t},callActivate(){this.hasWindow&&this.activate()},callDeactivate(){this.isContentActive=!1,this.deactivate()},checkForPageYOffset(){this.hasWindow&&(this.pageYOffset=this.activatorFixed?0:this.getOffsetTop())},checkActivatorFixed(){if(!1!==this.attach)return;let t=this.getActivator();while(t){if("fixed"===window.getComputedStyle(t).position)return void(this.activatorFixed=!0);t=t.offsetParent}this.activatorFixed=!1},deactivate(){},genActivatorListeners(){const t=a.Z.options.methods.genActivatorListeners.call(this),e=t.click;return e&&(t.click=t=>{this.openOnClick&&e&&e(t),this.absoluteX=t.clientX,this.absoluteY=t.clientY}),t},getInnerHeight(){return this.hasWindow?window.innerHeight||document.documentElement.clientHeight:0},getOffsetLeft(){return this.hasWindow?window.pageXOffset||document.documentElement.scrollLeft:0},getOffsetTop(){return this.hasWindow?window.pageYOffset||document.documentElement.scrollTop:0},getRoundedBoundedClientRect(t){const e=t.getBoundingClientRect();return{top:Math.round(e.top),left:Math.round(e.left),bottom:Math.round(e.bottom),right:Math.round(e.right),width:Math.round(e.width),height:Math.round(e.height)}},measure(t){if(!t||!this.hasWindow)return null;const e=this.getRoundedBoundedClientRect(t);if(!1!==this.attach){const s=window.getComputedStyle(t);e.left=parseInt(s.marginLeft),e.top=parseInt(s.marginTop)}return e},sneakPeek(t){requestAnimationFrame((()=>{const e=this.$refs.content;e&&"none"===e.style.display?(e.style.display="inline-block",t(),e.style.display="none"):t()}))},startTransition(){return new Promise((t=>requestAnimationFrame((()=>{this.isContentActive=this.hasJustFocused=this.isActive,t()}))))},updateDimensions(){this.hasWindow="undefined"!==typeof window,this.checkActivatorFixed(),this.checkForPageYOffset(),this.pageWidth=document.documentElement.clientWidth;const t={activator:{...this.dimensions.activator},content:{...this.dimensions.content}};if(!this.hasActivator||this.absolute)t.activator=this.absolutePosition();else{const e=this.getActivator();if(!e)return;t.activator=this.measure(e),t.activator.offsetLeft=e.offsetLeft,!1!==this.attach?t.activator.offsetTop=e.offsetTop:t.activator.offsetTop=0}this.sneakPeek((()=>{if(this.$refs.content){if(this.$refs.content.offsetParent){const e=this.getRoundedBoundedClientRect(this.$refs.content.offsetParent);this.relativeYOffset=window.pageYOffset+e.top,t.activator.top-=this.relativeYOffset,t.activator.left-=window.pageXOffset+e.left}t.content=this.measure(this.$refs.content)}this.dimensions=t}))}}})},70019:(t,e,s)=>{t.exports=s.p+"img/warning.21c27d99.svg"},87227:(t,e,s)=>{t.exports=s.p+"img/state_download.14f68bed.png"},46568:(t,e,s)=>{t.exports=s.p+"img/state_upload.9dc1924f.png"}}]);