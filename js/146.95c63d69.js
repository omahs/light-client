"use strict";(globalThis["webpackChunkraiden_dapp"]=globalThis["webpackChunkraiden_dapp"]||[]).push([[146],{37803:(t,e,s)=>{s.d(e,{Z:()=>_});var n=s(28508),a=s(53892),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(a.Z,{staticClass:"list-header",attrs:{"no-gutters":""}},[s(n.Z,{attrs:{cols:"12"}},[s("div",{staticClass:"list-header__header"},[t._v(t._s(t.header))]),s("div",{staticClass:"list-header__divider"})])],1)},o=[],r=s(59312),l=s(57102);let c=class extends l.w3{};(0,r.__decorate)([(0,l.fI)({required:!0})],c.prototype,"header",void 0),c=(0,r.__decorate)([(0,l.wA)({})],c);const d=c,h=d;var u=s(79917),p=(0,u.Z)(h,i,o,!1,null,"77a70cf5",null);const _=p.exports},72461:(t,e,s)=>{s.d(e,{Z:()=>C});var n=s(23399),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("raiden-dialog",{attrs:{"data-cy":"channel-deposit-dialog",visible:""},on:{close:t.emitClose}},[s(n.EB,[t._v(t._s(t.$t("channel-deposit.title")))]),s(n.ZB,[s("channel-deposit-action",{attrs:{title:t.$t("channel-deposit.title")},on:{completed:t.emitClose},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.runAction,a=e.confirmButtonLabel;return[s("channel-action-form",{attrs:{"token-address":t.tokenAddress,"partner-address":t.partnerAddress,"confirm-button-label":a,"run-action":n,"hide-token-address":"","hide-partner-address":"","token-amount-editable":"","limit-to-token-balance":""}})]}}])})],1)],1)},i=[],o=s(59312),r=s(57102),l=s(40694),c=s(14987);const d={title:"transfer.steps.deposit.title",description:"transfer.steps.deposit.description",active:!1,completed:!1,failed:!1};let h=class extends((0,r.Wr)(c.Z)){constructor(){super(...arguments),this.depositStep=Object.assign({},d)}get confirmButtonLabel(){return this.$t("channel-deposit.buttons.confirm")}get steps(){return[this.depositStep]}resetStepsState(){this.depositStep=Object.assign({},d)}async handleAction(t){this.depositStep.active=!0,await this.$raiden.deposit(t.tokenAddress,t.partnerAddress,t.tokenAmount),this.depositStep.completed=!0}};h=(0,o.__decorate)([r.wA],h);const u=h,p=u;var _,m,f=s(79917),b=(0,f.Z)(p,_,m,!1,null,null,null);const y=b.exports;var v=s(7648);let w=class extends r.w3{emitClose(){}};(0,o.__decorate)([(0,r.fI)({type:String,required:!0})],w.prototype,"tokenAddress",void 0),(0,o.__decorate)([(0,r.fI)({type:String,required:!0})],w.prototype,"partnerAddress",void 0),(0,o.__decorate)([(0,r.y1)("close")],w.prototype,"emitClose",null),w=(0,o.__decorate)([(0,r.wA)({components:{ChannelActionForm:l.Z,ChannelDepositAction:y,RaidenDialog:v.Z}})],w);const g=w,k=g;var Z=(0,f.Z)(k,a,i,!1,null,null,null);const C=Z.exports},12315:(t,e,s)=>{s.d(e,{Z:()=>m});var n=s(23399),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("raiden-dialog",{staticClass:"error-dialog",attrs:{visible:t.showDialog},on:{close:t.dismiss}},[s(n.ZB,[s("error-message",{attrs:{error:t.error}})],1)],1)},i=[],o=s(59312),r=s(57102),l=s(7648),c=s(94813);let d=class extends r.w3{dismiss(){return!0}get showDialog(){return null!==this.error}};(0,o.__decorate)([(0,r.fI)({required:!0})],d.prototype,"error",void 0),(0,o.__decorate)([(0,r.y1)()],d.prototype,"dismiss",null),d=(0,o.__decorate)([(0,r.wA)({components:{RaidenDialog:l.Z,ErrorMessage:c.Z}})],d);const h=d,u=h;var p=s(79917),_=(0,p.Z)(u,a,i,!1,null,"3d377652",null);const m=_.exports},54253:(t,e,s)=>{s.r(e),s.d(e,{default:()=>pt});var n=s(2138),a=s(76191),i=s(56357),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"channels"},[s("span",{staticClass:"font-weight-light ml-3"},[t._v(" "+t._s(t.$t("channels.title"))+" ")]),s(i.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[s("span",t._g({staticClass:"font-weight-medium"},n),[t._v(" "+t._s(t.$t("channels.token-info",{name:t.truncate(t.token.name,22),symbol:t.truncate(t.token.symbol,8)}))+" ")])]}}])},[s("span",[t._v(" "+t._s(t.token.address)+" ")])]),t.open.length>0?s("list-header",{staticClass:"channels__header",attrs:{header:t.$t("channels.open.header")}}):t._e(),s("div",{staticClass:"channels__wrapper"},[t.open.length>0?s("channel-list",{attrs:{token:t.token,channels:t.open,"selected-channel":t.selectedChannel,busy:t.busy},on:{action:t.onAction}}):t._e(),t.closed.length>0?s("list-header",{staticClass:"channels__header",attrs:{header:t.$t("channels.closed.header")}}):t._e(),t.closed.length>0?s("channel-list",{attrs:{token:t.token,channels:t.closed,"selected-channel":t.selectedChannel,busy:t.busy},on:{action:t.onAction}}):t._e(),t.settleable.length>0?s("list-header",{staticClass:"channels__header",attrs:{header:t.$t("channels.settleable.header")}}):t._e(),t.settleable.length>0?s("channel-list",{attrs:{token:t.token,channels:t.settleable,"selected-channel":t.selectedChannel,busy:t.busy},on:{action:t.onAction}}):t._e()],1),s(a.Z,{attrs:{"multi-line":!0,timeout:3e3,bottom:""},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.message)+" "),s(n.Z,{attrs:{color:"primary",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v(" "+t._s(t.$t("channels.snackbar-close"))+" ")])],1),t.selectedChannel&&t.action?s("channel-dialogs",{attrs:{action:t.action,channel:t.selectedChannel},on:{dismiss:function(e){t.action=null,t.selectedChannel=null},message:function(e){return t.showMessage(e)},busy:function(e){return t.setBusyState(e)}}}):t._e()],1)},r=[],l=s(59312),c=s(57102),d=s(77382),h=s(90878),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.error?s("error-dialog",{attrs:{error:t.error},on:{dismiss:t.dismiss}}):t.channel&&"close"===t.action?s("confirmation-dialog",{attrs:{identifier:t.channel.id,"positive-action":t.$t("confirmation.buttons.close"),visible:t.visible},on:{confirm:function(e){return t.close()},cancel:function(e){return t.dismiss()}},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("channel-list.channel.close_dialog.title"))+" ")]},proxy:!0}])},[t._v(" "+t._s(t.$t("channel-list.channel.close_dialog.description"))+" ")]):t.channel&&"settle"===t.action?s("confirmation-dialog",{attrs:{identifier:t.channel.id,"positive-action":t.$t("confirmation.buttons.settle"),visible:t.visible},on:{confirm:function(e){return t.settle()},cancel:function(e){return t.dismiss()}},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("channel-list.channel.settle_dialog.title"))+" ")]},proxy:!0}])},[t._v(" "+t._s(t.$t("channel-list.channel.settle_dialog.description",{partner:t.channel.partner,token:t.channel.token}))+" ")]):t.channel&&"deposit"===t.action?s("channel-deposit-dialog",{attrs:{"token-address":t.token.address,"partner-address":t.channel.partner},on:{close:function(e){return t.dismiss()}}}):t.channel&&"withdraw"===t.action?s("channel-withdraw-dialog",{attrs:{identifier:t.channel.id,token:t.token,channel:t.channel,visible:t.visible,loading:t.withdrawInProgress,done:!1},on:{"withdraw-tokens":function(e){return t.withdraw(e)},cancel:function(e){return t.dismiss()}}}):t._e()},p=[],_=s(72461),m=s(23399),f=s(13082),b=s(55429),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("raiden-dialog",{staticClass:"channel-withdraw",attrs:{"data-cy":"channel_withdraw",visible:t.visible},on:{close:t.cancel}},[n(m.EB,[t._v(" "+t._s(t.title)+" ")]),n(m.ZB,[t.loading?[n("spinner"),n("span",[t._v(t._s(t.$t("channel-withdraw.dialog.description")))])]:t.done?[n(b.Z,{staticClass:"channel-withdraw__done my-4",attrs:{src:s(44036)}}),n("span",[t._v(t._s(t.$t("channel-withdraw.done.description")))])]:n(f.Z,{on:{submit:function(e){return e.preventDefault(),t.withdrawTokens()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("amount-input",{staticClass:"channel-withdraw__input",attrs:{"data-cy":"channel_withdraw_input",token:t.token,max:t.channel.ownWithdrawable,limit:""},model:{value:t.withdraw,callback:function(e){t.withdraw=e},expression:"withdraw"}}),n("action-button",{staticClass:"mt-8",attrs:{id:"confirm-"+t.identifier,"data-cy":"channel_withdraw_button",enabled:t.valid,text:t.$t("channel-withdraw.buttons.confirm"),"full-width":""}})],1)],2)],1)},v=[],w=s(80300),g=s(81327),k=s(7648),Z=s(54928),C=s(55679);let $=class extends c.w3{constructor(){super(...arguments),this.withdraw="",this.valid=!1}get title(){return this.loading?this.$t("channel-withdraw.dialog.title"):this.done?this.$t("channel-withdraw.done.title"):this.$t("channel-withdraw.dialog.label")}onVisibilityChanged(t){t&&this.updateWithdraw()}mounted(){this.updateWithdraw()}async updateWithdraw(){var t;this.withdraw=0===(null!==(t=this.token.decimals)&&void 0!==t?t:18)?"0":"0.0",await this.$raiden.fetchAndUpdateTokenData([this.token.address])}cancel(){return!0}withdrawTokens(){const t=C.D.parse(this.withdraw,this.token.decimals);t.isZero()||this.$emit("withdraw-tokens",t)}};(0,l.__decorate)([(0,c.fI)({required:!0})],$.prototype,"identifier",void 0),(0,l.__decorate)([(0,c.fI)({required:!0,type:Boolean,default:!1})],$.prototype,"visible",void 0),(0,l.__decorate)([(0,c.fI)({required:!0})],$.prototype,"token",void 0),(0,l.__decorate)([(0,c.fI)({required:!0})],$.prototype,"channel",void 0),(0,l.__decorate)([(0,c.fI)({required:!0})],$.prototype,"loading",void 0),(0,l.__decorate)([(0,c.fI)({required:!1,default:!1})],$.prototype,"done",void 0),(0,l.__decorate)([(0,c.RL)("visible")],$.prototype,"onVisibilityChanged",null),(0,l.__decorate)([(0,c.y1)()],$.prototype,"cancel",null),$=(0,l.__decorate)([(0,c.wA)({components:{AmountInput:g.Z,ActionButton:w.Z,RaidenDialog:k.Z,Spinner:Z.Z}})],$);const A=$,x=A;var I=s(79917),D=(0,I.Z)(x,y,v,!1,null,"1fc66e0e",null);const S=D.exports;var q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("raiden-dialog",{staticClass:"confirmation",attrs:{visible:t.visible},on:{close:t.cancel}},[s(m.EB,[t._t("header")],2),s(m.ZB,[t._t("default")],2),s(m.h7,[s("action-button",{staticClass:"confirmation__button",attrs:{id:"confirm-"+t.identifier,enabled:!0,text:t.positiveAction,"full-width":""},on:{click:function(e){return t.confirm()}}})],1)],1)},B=[];let E=class extends c.w3{cancel(){return!0}confirm(){return!0}};(0,l.__decorate)([(0,c.fI)({required:!0,type:Boolean,default:!1})],E.prototype,"visible",void 0),(0,l.__decorate)([(0,c.fI)({required:!0})],E.prototype,"positiveAction",void 0),(0,l.__decorate)([(0,c.fI)({required:!0})],E.prototype,"identifier",void 0),(0,l.__decorate)([(0,c.y1)()],E.prototype,"cancel",null),(0,l.__decorate)([(0,c.y1)()],E.prototype,"confirm",null),E=(0,l.__decorate)([(0,c.wA)({components:{RaidenDialog:k.Z,ActionButton:w.Z}})],E);const T=E,z=T;var W=(0,I.Z)(z,q,B,!1,null,null,null);const F=W.exports;var P=s(12315);let L=class extends c.w3{constructor(){super(...arguments),this.depositInProgress=!1,this.withdrawInProgress=!1,this.visible=!0,this.error=null}get token(){return this.getToken(this.channel.token)}message(t){return t}dismiss(t){this.depositInProgress=!1,this.busy([!1,t])}busy(t){return t}async deposit(t){const{token:e,partner:s,id:n}=this.channel;this.busy([!0,n]);try{this.depositInProgress=!0,await this.$raiden.deposit(e,s,t),this.message(this.$t("channel-list.messages.deposit.success")),this.dismiss(n)}catch(a){this.message(this.$t("channel-list.messages.deposit.failure")),this.error=a}this.busy([!1,n])}async withdraw(t){const{token:e,partner:s,id:n}=this.channel;this.busy([!0,n]);try{this.withdrawInProgress=!0,await this.$raiden.withdraw(e,s,t),this.message(this.$t("channel-list.messages.withdraw.success")),this.dismiss(n)}catch(a){this.message(this.$t("channel-list.messages.withdraw.failure")),this.error=a}this.busy([!1,n])}async close(){const{token:t,partner:e,id:s}=this.channel;this.busy([!0,s]),this.visible=!1;try{await this.$raiden.closeChannel(t,e),this.message(this.$t("channel-list.messages.close.success")),this.dismiss(s)}catch(n){this.message(this.$t("channel-list.messages.close.failure")),this.error=n}this.busy([!1,s])}async settle(){const{token:t,partner:e,id:s}=this.channel;this.busy([!0,s]),this.visible=!1;try{await this.$raiden.settleChannel(t,e),this.message(this.$t("channel-list.messages.settle.success")),this.dismiss(s)}catch(n){this.message(this.$t("channel-list.messages.settle.failure")),this.error=n}this.busy([!1,s])}};(0,l.__decorate)([(0,c.fI)({required:!0})],L.prototype,"channel",void 0),(0,l.__decorate)([(0,c.fI)({required:!0})],L.prototype,"action",void 0),(0,l.__decorate)([(0,c.y1)()],L.prototype,"message",null),(0,l.__decorate)([(0,c.y1)()],L.prototype,"dismiss",null),(0,l.__decorate)([(0,c.y1)()],L.prototype,"busy",null),L=(0,l.__decorate)([(0,c.wA)({components:{ChannelDepositDialog:_.Z,ChannelWithdrawDialog:S,ConfirmationDialog:F,ErrorDialog:P.Z},computed:{...(0,d.Se)({getToken:"token"})}})],L);const R=L,H=R;var M=(0,I.Z)(H,u,p,!1,null,"2ac7c0a0",null);const V=M.exports;var j=s(28508),N=s(50948),O=s(19021),U=s(48727),G=s(3950),J=s(53892),K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(J.Z,{staticClass:"channel-list",attrs:{"data-cy":"channel_list","no-gutters":""}},[a(j.Z,{attrs:{cols:"12"}},[a(N.Z,{staticClass:"channel-list__channels",attrs:{flat:""}},t._l(t.channels,(function(e){return a(O.Z,{key:e.partner,staticClass:"channel-list__channels__channel"},[a(U.Z,[a("img",{attrs:{src:t.$blockie(e.partner),alt:t.$t("channel-list.channel.blockie_alt")}})]),a(G.km,[a(G.V9,[a("address-display",{attrs:{address:e.partner}})],1),a(G.oZ,[a("span",[t._v(" "+t._s(t.$t("channel-list.channel.capacity",{value:t.displayFormat(e.capacity,t.token.decimals||0)}))+" ")])])],1),a("div",{staticClass:"channel-list__capacity-buttons"},[a(n.Z,{staticClass:"channel-list__capacity-buttons__deposit",attrs:{id:"deposit-"+e.id,disabled:"open"!==e.state||!!t.busy[e.id],"data-cy":"channel_action_button",icon:""},on:{click:function(s){return t.action(["deposit",e])}}},[a("img",{attrs:{src:s(88759)}})]),a(n.Z,{staticClass:"channel-list__capacity-buttons__withdrawal",attrs:{id:"withdraw-"+e.id,disabled:"open"!==e.state||!!t.busy[e.id],"data-cy":"channel_action_button",icon:""},on:{click:function(s){return t.action(["withdraw",e])}}},[a("img",{attrs:{src:s(21597)}})])],1),a("div",{attrs:{"data-cy":"channel_action"}},[t.selectedChannel&&e.id===t.selectedChannel.id&&t.busy[e.id]?a(n.Z,{staticClass:"channel-list__action-button",attrs:{id:"busy-"+e.id,disabled:""}},[a("spinner",{attrs:{size:18,width:2}})],1):"open"===e.state||"closing"===e.state?a(n.Z,{staticClass:"channel-list__action-button",attrs:{id:"close-"+e.id,disabled:!!t.busy[e.id]},on:{click:function(s){return t.action(["close",e])}}},[t._v(" "+t._s(t.$t("channel-actions.close"))+" ")]):a(n.Z,{staticClass:"channel-list__action-button",attrs:{id:"settle-"+e.id,disabled:"closed"===e.state||!!t.busy[e.id]},on:{click:function(s){return t.action(["settle",e])}}},[t._v(" "+t._s("closed"===e.state?e.closeBlock+e.settleTimeout-t.blockNumber+1:t.$t("channel-actions.settle"))+" ")])],1)],1)})),1)],1)],1)},Q=[],X=s(1560),Y=s(93840),tt=s(31113);let et=class extends((0,c.Wr)(tt.Z)){constructor(){super(...arguments),this.displayFormat=Y.Z.displayFormat,this.capitalizeFirst=Y.Z.capitalizeFirst}action(t){return t}};(0,l.__decorate)([(0,c.fI)({required:!0})],et.prototype,"channels",void 0),(0,l.__decorate)([(0,c.fI)({required:!0})],et.prototype,"token",void 0),(0,l.__decorate)([(0,c.fI)({default:null})],et.prototype,"selectedChannel",void 0),(0,l.__decorate)([(0,c.fI)()],et.prototype,"busy",void 0),(0,l.__decorate)([(0,c.y1)()],et.prototype,"action",null),et=(0,l.__decorate)([(0,c.wA)({components:{AddressDisplay:X.Z,Spinner:Z.Z},computed:(0,d.rn)(["blockNumber"])})],et);const st=et,nt=st;var at=(0,I.Z)(nt,K,Q,!1,null,"3c93bf7f",null);const it=at.exports;var ot=s(37803),rt=s(55093),lt=s(28341);let ct=class extends((0,c.Wr)(rt.Z)){constructor(){super(...arguments),this.message="",this.snackbar=!1,this.selectedChannel=null,this.action=null,this.busy={},this.truncate=Y.Z.truncate}setBusyState([t,e]){this.busy[e]=t}onAction([t,e]){this.selectedChannel=e,this.action=t}get open(){return this.channels(this.$route.params.token).filter((t=>t.state===h.Dz.open))}get closed(){return this.channels(this.$route.params.token).filter((t=>t.state===h.Dz.closed||t.state===h.Dz.closing))}get settleable(){return this.channels(this.$route.params.token).filter((t=>t.state===h.Dz.settling||t.state===h.Dz.settleable))}get token(){const{token:t}=this.$route.params;return this.tokens[t]||{address:t}}async created(){const{token:t}=this.$route.params;lt.Z.checkAddressChecksum(t)?(await this.$raiden.fetchAndUpdateTokenData([t]),"number"!==typeof this.token.decimals&&this.navigateToHome()):this.navigateToHome()}showMessage(t){this.message=t,this.snackbar=!0}};ct=(0,l.__decorate)([(0,c.wA)({components:{ChannelDialogs:V,ListHeader:ot.Z,ChannelList:it},computed:{...(0,d.rn)(["tokens"]),...(0,d.Se)(["channels"])}})],ct);const dt=ct,ht=dt;var ut=(0,I.Z)(ht,o,r,!1,null,"b0536230",null);const pt=ut.exports},88759:(t,e,s)=>{t.exports=s.p+"img/deposit.aedf58cf.svg"},21597:(t,e,s)=>{t.exports=s.p+"img/withdrawal.560134b7.svg"}}]);