"use strict";(globalThis["webpackChunkraiden_dapp"]=globalThis["webpackChunkraiden_dapp"]||[]).push([[56],{63606:(t,e,s)=>{s.d(e,{Z:()=>E});var i,n=s(23399),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("raiden-dialog",{attrs:{visible:t.visible},on:{close:t.cancel}},[t.error?t._e():s(n.EB,[t._v(" "+t._s(t.$t("udc-deposit-dialog.title"))+" ")]),t.error?t._e():s(n.Qq,{staticClass:"udc-deposit-dialog__balance"},[t._v(" "+t._s(t.$t("udc-deposit-dialog.available-utility-token",{utilityTokenSymbol:t.udcToken.symbol,utilityTokenBalance:t.utilityTokenBalance}))+" ")]),s(n.ZB,[t.loading||t.error?t.error?s("error-message",{attrs:{error:t.error}}):s("div",{staticClass:"udc-deposit-dialog--progress"},[s("spinner"),t.currentStepDescription?s("span",[t._v(" "+t._s(t.currentStepDescription)+" ")]):t._e()],1):s("amount-input",{attrs:{token:t.udcToken,placeholder:t.$t("transfer.amount-placeholder")},model:{value:t.defaultUtilityTokenAmount,callback:function(e){t.defaultUtilityTokenAmount=e},expression:"defaultUtilityTokenAmount"}}),!t.mainnet||t.loading||t.error?t._e():s("a",{staticClass:"udc-deposit-dialog--uniswap-url",attrs:{href:t.uniswapURL,target:"_blank"}},[t._v(" "+t._s(t.$t("udc-deposit-dialog.uniswap-url-title"))+" ")])],1),t.error?t._e():s(n.h7,[s("action-button",{staticClass:"udc-deposit-dialog__action",attrs:{arrow:"","full-width":"",enabled:t.valid&&!t.loading,text:t.$t(t.mainnet?"udc-deposit-dialog.button-main":"udc-deposit-dialog.button"),"data-cy":"udc_deposit_dialog_action"},on:{click:function(e){return t.udcDeposit()}}})],1)],1)},o=[],r=s(59312),c=s(43535),l=s(5733),u=s(57102),d=s(77382),h=s(31034),_=s(80300),p=s(81327),b=s(7648),m=s(94813),g=s(54928),v=s(93840),k=s(55679);(function(t){t["MINT"]="mint",t["APPROVE"]="approve",t["DEPOSIT"]="deposit",t["NONE"]="none"})(i||(i={}));let f=class extends u.w3{constructor(){super(...arguments),this.uniswapURL="",this.defaultUtilityTokenAmount="",this.step=i.NONE,this.loading=!1,this.error=null}cancel(){this.error=null}get utilityTokenBalance(){return v.Z.displayFormat(this.udcToken.balance,this.udcToken.decimals)}get valid(){let t;try{t=c.vz(this.defaultUtilityTokenAmount,this.udcToken.decimals)}catch(e){return!1}return this.mainnet?t.lte(this.udcToken.balance)&&t.gt(l._Y):t.gt(l._Y)}get currentStepDescription(){if(this.step===i.NONE)return"";{const t=`udc-deposit-dialog.progress.${this.step.toString()}`;return this.$t(t,{currency:this.udcToken.symbol})}}mounted(){var t;const e=null!==(t=this.$raiden.getMainAccount())&&void 0!==t?t:this.$raiden.getAccount(),s=c.dF(h.O6.mul(2));this.uniswapURL=`https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency=${this.udcToken.address}&exactAmount=${s}&exactField=outPUT&recipient=${e}`,this.defaultUtilityTokenAmount=this.mainnet?this.utilityTokenBalance:s}async udcDeposit(){this.error=null,this.loading=!0;const t=this.udcToken,e=k.D.parse(this.defaultUtilityTokenAmount,t.decimals);try{!this.mainnet&&e.gt(t.balance)&&(this.step=i.MINT,await this.$raiden.mint(t.address,e)),this.step=i.APPROVE,await this.$raiden.depositToUDC(e,(()=>{this.step=i.DEPOSIT})),this.$emit("done")}catch(s){this.error=s}this.step=i.NONE,this.loading=!1}};(0,r.__decorate)([(0,u.fI)({required:!0,type:Boolean})],f.prototype,"visible",void 0),(0,r.__decorate)([(0,u.y1)()],f.prototype,"cancel",null),f=(0,r.__decorate)([(0,u.wA)({components:{ActionButton:_.Z,RaidenDialog:b.Z,ErrorMessage:m.Z,Spinner:g.Z,AmountInput:p.Z},computed:{...(0,d.rn)("userDepositContract",{udcToken:"token"}),...(0,d.Se)(["mainnet"])}})],f);const y=f,T=y;var C=s(79917),A=(0,C.Z)(T,a,o,!1,null,"c3777994",null);const E=A.exports},60333:(t,e,s)=>{s.r(e),s.d(e,{default:()=>M});var i=s(2138),n=s(13082),a=s(55429),o=s(56357),r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(n.Z,{ref:"form",staticClass:"select-hub",attrs:{autocomplete:"off","data-cy":"select_hub"},on:{submit:function(e){return e.preventDefault(),t.selectHub()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("div",{staticClass:"select-hub__udc"},[r("div",{staticClass:"select-hub__udc__balance",class:{"low-balance":!t.hasEnoughServiceTokens}},[r("amount-display",{attrs:{"exact-amount":"",amount:t.udcCapacity,token:t.udcToken}}),r(o.Z,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r(i.Z,t._g({staticClass:"select-hub__udc__balance__deposit",attrs:{icon:"","data-cy":"select_hub_udc_balance_deposit"},on:{click:function(e){t.showUdcDeposit=!0}}},n),[r(a.Z,{attrs:{src:s(50939)}})],1)]}}])},[r("span",[t._v(" "+t._s(t.$t(t.mainnet?"select-hub.service-token-tooltip-main":"select-hub.service-token-tooltip",{token:t.serviceToken}))+" ")])])],1),r("span",{staticClass:"select-hub__udc__description"},[t._v(" "+t._s(t.$t("select-hub.service-token-description").toUpperCase())+" ")])]),r("address-input",{attrs:{value:t.partner,exclude:[t.token.address,t.defaultAccount]},model:{value:t.partner,callback:function(e){t.partner=e},expression:"partner"}}),r("div",{staticClass:"select-hub__hub-list"},[r("hub-list",{attrs:{"token-address":t.token.address},on:{"select-hub":function(e){return t.setSuggestedPartner(e)}}})],1),r("div",{staticClass:"select-hub__token-balance"},[r("token-information",{attrs:{token:t.token}})],1),r("action-button",{staticClass:"select_hub__address-input",attrs:{"data-cy":"select_hub_button",enabled:t.valid,text:t.$t("select-hub.select-button"),sticky:""}}),r("udc-deposit-dialog",{attrs:{visible:t.showUdcDeposit},on:{cancel:function(e){t.showUdcDeposit=!1},done:function(e){return t.mintDone()}}})],1)},c=[],l=s(59312),u=s(5733),d=s(90104),h=s.n(d),_=s(57102),p=s(77382),b=s(80300),m=s(71631),g=s(9226),v=s(63606),k=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"divider"},[s("div",{staticClass:"divider__line"})])}];let y=class extends _.w3{};y=(0,l.__decorate)([(0,_.wA)({})],y);const T=y,C=T;var A=s(79917),E=(0,A.Z)(C,k,f,!1,null,"07173450",null);const w=E.exports;var U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hub-list"},[n("span",{staticClass:"hub-list__header"},[t._v(t._s(t.$t("hub-list.header")))]),t.loadingHubs?n("spinner",{staticClass:"hub-list__loading"}):!t.loadingHubs&&t.requestFailed?n("div",{staticClass:"hub-list__no-hubs"},[t._v(" "+t._s(t.$t("hub-list.error"))+" ")]):t.loadingHubs||0!==t.suggestedHubs.length?t._l(t.suggestedHubs.slice(0,3),(function(e,o){return n("div",{key:o},[n("div",{staticClass:"hub-list__item"},[n("div",{staticClass:"hub-list__item__icon"},[n(a.Z,{attrs:{src:s(78966)}})],1),n("span",{staticClass:"hub-list__item__address"},[t._v(t._s(e.address))]),n("span",{staticClass:"hub-list__item__address-mobile"},[t._v(" "+t._s(t.truncate(e.address,10))+" ")]),n(i.Z,{staticClass:"hub-list__item__select-button",attrs:{text:""},on:{click:function(e){return t.selectDeselectHub(o)}}},[t.hubIsSelected(e.address)?n("div",{staticClass:"hub-list__item__select-button__selected-icon"},[n(a.Z,{attrs:{src:s(10784)}})],1):n("span",[t._v(" "+t._s(t.$t("hub-list.select-button"))+" ")])])],1)])})):n("div",{staticClass:"hub-list__no-hubs"},[t._v(" "+t._s(t.$t("hub-list.no-results"))+" ")])],2)},$=[],D=s(54928),H=s(93840);let Z=class extends _.w3{constructor(){super(...arguments),this.truncate=H.Z.truncate,this.loadingHubs=!0,this.requestFailed=!1,this.suggestedHubs=[],this.selectedHub=""}selectHub(){return this.selectedHub}async mounted(){try{this.suggestedHubs=await this.$raiden.getSuggestedPartners(this.tokenAddress)}catch(t){this.requestFailed=!0}finally{this.loadingHubs=!1}}selectDeselectHub(t){const e=this.suggestedHubs[t].address;this.selectedHub===e?this.selectedHub="":this.selectedHub=e,this.selectHub()}hubIsSelected(t){return this.selectedHub===t}};(0,l.__decorate)([(0,_.fI)({required:!0})],Z.prototype,"tokenAddress",void 0),(0,l.__decorate)([(0,_.y1)()],Z.prototype,"selectHub",null),Z=(0,l.__decorate)([(0,_.wA)({components:{Spinner:D.Z}})],Z);const P=Z,S=P;var x=(0,A.Z)(S,U,$,!1,null,"76eb1016",null);const I=x.exports;var N=s(9125),O=s(55093),R=s(28341);let L=class extends((0,_.Wr)(O.Z)){constructor(){super(...arguments),this.partner="",this.valid=!0,this.showUdcDeposit=!1,this.udcCapacity=u._Y,this.hasEnoughServiceTokens=!1}async mounted(){await this.updateUDCCapacity()}get token(){const{token:t}=this.$route.params;return this.getToken(t)||{address:t}}selectHub(){this.navigateToOpenChannel(this.token.address,this.partner)}setSuggestedPartner(t){t?this.partner=t:this.$refs.form.reset()}async updateUDCCapacity(){const{monitoringReward:t}=this.$raiden;this.udcCapacity=await this.$raiden.getUDCCapacity(),this.hasEnoughServiceTokens=!(!t||!this.udcCapacity.gte(t))}get isConnectedToHub(){const{token:t}=this.$route.params;return!h()(this.channels[t])}get serviceToken(){var t;return null!==(t=this.udcToken.symbol)&&void 0!==t?t:this.mainnet?"RDN":"SVT"}async created(){const{token:t}=this.$route.params;var e;R.Z.checkAddressChecksum(t)?(await this.$raiden.fetchAndUpdateTokenData([t]),"number"!==typeof this.token.decimals&&this.navigateToHome(),await this.$raiden.monitorToken(t),this.isConnectedToHub||"goerli"!==this.network.name||(this.partner=null!==(e={VUE_APP_ALLOW_MAINNET:"true",VUE_APP_IMPRINT:"https://raiden.network/privacy.html",VUE_APP_TERMS:"https://github.com/raiden-network/light-client/blob/master/TERMS.md",VUE_APP_CONFIGURATION_URL:"config.production.json",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",VUE_APP_SERVICE_WORKER_DISABLED:"false",BASE_URL:"/"}.VUE_APP_HUB)&&void 0!==e?e:"")):this.navigateToHome()}async mintDone(){this.showUdcDeposit=!1,await this.updateUDCCapacity()}};L=(0,l.__decorate)([(0,_.wA)({components:{TokenInformation:N.Z,Divider:w,AddressInput:m.Z,ActionButton:b.Z,UdcDepositDialog:v.Z,AmountDisplay:g.Z,HubList:I},computed:{...(0,p.rn)(["defaultAccount","channels","network"]),...(0,p.rn)("userDepositContract",{udcToken:"token"}),...(0,p.Se)({getToken:"token",mainnet:"mainnet"})}})],L);const B=L,V=B;var F=(0,A.Z)(V,r,c,!1,null,"26d18f76",null);const M=F.exports},78966:(t,e,s)=>{t.exports=s.p+"img/hub-healthy.a0aa3aa3.svg"},10784:(t,e,s)=>{t.exports=s.p+"img/hub-selected.fff87497.svg"}}]);