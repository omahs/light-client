"use strict";(globalThis["webpackChunkraiden_dapp"]=globalThis["webpackChunkraiden_dapp"]||[]).push([[870],{40694:(e,t,s)=>{s.d(t,{Z:()=>v});var o=s(13082),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{"data-cy":"channel-action-form"}},[s(o.Z,{staticClass:"channel-action-form",attrs:{autocomplete:"off"},on:{input:e.emitInputsChanged,submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}},model:{value:e.inputsAreValid,callback:function(t){e.inputsAreValid=t},expression:"inputsAreValid"}},[e.hideTokenAddress?e._e():[e.tokenAddressEditable?s("address-input",{staticClass:"channel-action-form__token-address channel-action-form__editable-input",attrs:{value:e.tokenAddressInput},model:{value:e.tokenAddressInput,callback:function(t){e.tokenAddressInput=t},expression:"tokenAddressInput"}}):s("div",{staticClass:"channel-action-form__token-address channel-action-form__fixed-input-wrapper"},[s("token-information",{attrs:{token:e.token}})],1)],e.hidePartnerAddress?e._e():[e.partnerAddressEditable?s("address-input",{staticClass:"channel-action-form__partner-address channel-action-form__editable-input",attrs:{value:e.partnerAddressInput,restricted:e.restrictedPartnerAddresses,"restricted-error-message":"channel-action-form.restricted-partner-address-error",exclude:e.excludedPartnerAddresses,"exclude-error-message":"channel-action-form.exclude-partner-address-error",autofocus:e.partnerAddressInputFocused},model:{value:e.partnerAddressInput,callback:function(t){e.partnerAddressInput=t},expression:"partnerAddressInput"}}):s("div",{staticClass:"channel-action-form__partner-address channel-action-form__fixed-input-wrapper"},[s("address-display",{attrs:{label:e.$t("channel-action-form.partner"),address:e.partnerAddress,"full-width":""}})],1)],e.hideTokenAmount?e._e():[e.tokenAmountEditable?s("amount-input",{staticClass:"channel-action-form__token-amount channel-action-form__editable-input",attrs:{"data-cy":"channel-action-form__token-amount__input",token:e.token,placeholder:e.$t("channel-action-form.amount"),max:e.tokenAmountLimit,min:e.minimumTokenAmount,limit:!!e.tokenAmountLimit,autofocus:e.tokenAmountInputFocused},model:{value:e.tokenAmountInput,callback:function(t){e.tokenAmountInput=t},expression:"tokenAmountInput"}}):s("div",{staticClass:"channel-action-form__token-amount channel-action-form__fixed-input-wrapper"},[s("amount-display",{attrs:{label:e.$t("channel-action-form.amount"),amount:e.parsedTokenAmount,token:e.token,"exact-amount":"","full-width":""}})],1)],s("action-button",{attrs:{"data-cy":"channel-action-form__button",text:e.confirmButtonLabel,enabled:!!e.inputsAreValid,sticky:e.stickyButton}})],2)],1)},n=[],a=s(59312),i=s(3922),d=s(57102),l=s(77382),p=s(80300),c=s(1560),u=s(71631),_=s(9226),h=s(81327),m=s(9125),f=s(55679);let A=class extends d.w3{constructor(){super(...arguments),this.tokenAddressEditable=!1,this.tokenAddressInput="",this.partnerAddressInput="",this.tokenAmountInput="",this.inputsAreValid=!1}async onTokenAddressChange(e){this.tokenAddressInput=e,await this.$raiden.fetchAndUpdateTokenData([e]),await this.$raiden.monitorToken(e)}onPartnerAddressChange(e){this.partnerAddressInput=e}onTokenAmountChange(e){this.tokenAmountInput=e}get token(){return this.getToken(this.tokenAddressInput)}get tokenAddressInputFocused(){return!this.autofocusDisabled&&this.tokenAddressEditable}get partnerAddressInputFocused(){return!this.autofocusDisabled&&!this.tokenAddressInputFocused&&this.partnerAddressEditable}get tokenAmountInputFocused(){return!this.autofocusDisabled&&!this.tokenAddressInputFocused&&!this.partnerAddressInputFocused&&this.tokenAmountEditable}get channelPartnerAddresses(){const e=this.getChannels(this.tokenAddressInput);return e.map((e=>e.partner))}get restrictedPartnerAddresses(){if(this.restrictToChannelPartners)return this.channelPartnerAddresses}get excludedPartnerAddresses(){if(this.excludeChannelPartners)return this.channelPartnerAddresses}get tokenAmountLimit(){if(this.limitToTokenBalance)return i.O$.from(this.token.balance);if(this.limitToChannelWithdrawable){const e=this.getChannels(this.tokenAddressInput),t=e.filter((e=>e.partner==this.partnerAddressInput))[0];return null===t||void 0===t?void 0:t.ownWithdrawable}}get parsedTokenAmount(){return f.D.parse(this.tokenAmountInput,this.token.decimals)}async submit(){this.inputsAreValid&&await this.runAction({tokenAddress:this.tokenAddressInput,partnerAddress:this.partnerAddressInput,tokenAmount:this.parsedTokenAmount})}emitInputsChanged(){return{tokenAddress:this.tokenAddressInput,partnerAddress:this.partnerAddressInput,tokenAmount:this.tokenAmountInput}}};(0,a.__decorate)([(0,d.fI)({type:String,default:""})],A.prototype,"tokenAddress",void 0),(0,a.__decorate)([(0,d.fI)({type:Boolean,default:!1})],A.prototype,"hideTokenAddress",void 0),(0,a.__decorate)([(0,d.fI)({type:String,default:""})],A.prototype,"partnerAddress",void 0),(0,a.__decorate)([(0,d.fI)({type:Boolean,default:!1})],A.prototype,"hidePartnerAddress",void 0),(0,a.__decorate)([(0,d.fI)({type:Boolean,default:!1})],A.prototype,"partnerAddressEditable",void 0),(0,a.__decorate)([(0,d.fI)({type:Boolean,default:!1})],A.prototype,"restrictToChannelPartners",void 0),(0,a.__decorate)([(0,d.fI)({type:Boolean,default:!1})],A.prototype,"excludeChannelPartners",void 0),(0,a.__decorate)([(0,d.fI)({type:String,default:""})],A.prototype,"tokenAmount",void 0),(0,a.__decorate)([(0,d.fI)({type:Boolean,default:!1})],A.prototype,"tokenAmountEditable",void 0),(0,a.__decorate)([(0,d.fI)({type:Boolean,default:!1})],A.prototype,"limitToTokenBalance",void 0),(0,a.__decorate)([(0,d.fI)({type:Boolean,default:!1})],A.prototype,"limitToChannelWithdrawable",void 0),(0,a.__decorate)([(0,d.fI)({required:!1})],A.prototype,"minimumTokenAmount",void 0),(0,a.__decorate)([(0,d.fI)({type:Boolean,default:!1})],A.prototype,"hideTokenAmount",void 0),(0,a.__decorate)([(0,d.fI)({type:String,required:!0})],A.prototype,"confirmButtonLabel",void 0),(0,a.__decorate)([(0,d.fI)({type:Boolean,default:!1})],A.prototype,"stickyButton",void 0),(0,a.__decorate)([(0,d.fI)({type:Boolean,default:!1})],A.prototype,"autofocusDisabled",void 0),(0,a.__decorate)([(0,d.fI)({required:!0})],A.prototype,"runAction",void 0),(0,a.__decorate)([(0,d.RL)("tokenAddress",{immediate:!0})],A.prototype,"onTokenAddressChange",null),(0,a.__decorate)([(0,d.RL)("partnerAddress",{immediate:!0})],A.prototype,"onPartnerAddressChange",null),(0,a.__decorate)([(0,d.RL)("tokenAmount",{immediate:!0})],A.prototype,"onTokenAmountChange",null),(0,a.__decorate)([(0,d.y1)("inputsChanged")],A.prototype,"emitInputsChanged",null),A=(0,a.__decorate)([(0,d.wA)({components:{ActionButton:p.Z,AddressDisplay:c.Z,AddressInput:u.Z,AmountDisplay:_.Z,AmountInput:h.Z,TokenInformation:m.Z},computed:{...(0,l.Se)({getToken:"token",getChannels:"channels"})}})],A);const g=A,k=g;var y=s(79917),I=(0,y.Z)(k,r,n,!1,null,"c22347fe",null);const v=I.exports},14987:(e,t,s)=>{s.d(t,{Z:()=>A});var o=s(59312),r=s(57102),n=s(23399),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"action-progress-card",attrs:{"data-cy":"action-progress-card"}},[e.singleStepOnly?e._e():s("ul",{staticClass:"action-progress-card__step-list"},e._l(e.steps,(function(t,o){return s("li",{key:o,staticClass:"action-progress-card__step-list__step",class:{"action-progress-card__step-list__step--active":t.active,"action-progress-card__step-list__step--completed":t.completed,"action-progress-card__step-list__step--failed":t.failed}},[s("img",{staticClass:"action-progress-card__step-list__step__status-icon",class:{"action-progress-card__step-list__step__status-icon--active":t.active,"action-progress-card__step-list__step__status-icon--completed":t.completed,"action-progress-card__step-list__step__status-icon--failed":t.failed},attrs:{src:e.getStepStatusIcon(t)}}),e._v(" "+e._s(e.$t(t.title))+" ")])})),0),e.completed||e.error?s("img",{staticClass:"action-progress-card__status-icon",attrs:{src:e.statusIcon}}):s("spinner"),s("div",{staticClass:"action-progress-card__details"},[e.activeStep&&!e.error?s("span",{staticClass:"action-progress-card__details__step-description"},[e._v(" "+e._s(e.$t(e.activeStep.description))+" ")]):e._e(),e.error?s("span",{staticClass:"action-progress-card__details__error-message"},[e._v(" "+e._s(e.error.message)+" ")]):e._e()])],1)},i=[],d=s(54928);let l=class extends r.w3{constructor(){super(...arguments),this.completedIcon=s(44036),this.errorIcon=s(35551)}get activeStep(){return this.steps.filter((e=>e.active))[0]}get singleStepOnly(){return 1===this.steps.length}get statusIcon(){return this.completed?this.completedIcon:this.error?this.errorIcon:""}getStepStatusIcon(e){return e.failed?this.errorIcon:this.completedIcon}};(0,o.__decorate)([(0,r.fI)({default:()=>[]})],l.prototype,"steps",void 0),(0,o.__decorate)([(0,r.fI)({required:!0,type:Boolean})],l.prototype,"completed",void 0),(0,o.__decorate)([(0,r.fI)({required:!1,default:null})],l.prototype,"error",void 0),l=(0,o.__decorate)([(0,r.wA)({components:{Spinner:d.Z}})],l);const p=l,c=p;var u=s(79917),_=(0,u.Z)(c,a,i,!1,null,"3d922250",null);const h=_.exports;var m=s(7648);let f=class extends r.w3{constructor(){super(...arguments),this.completed=!1,this.error=null,this.progressVisible=!1,this.progressDialogClosed=!1}get confirmButtonLabel(){return""}get steps(){return[]}get dialogClosable(){return this.completed||null!=this.error}resetStepsState(){}resetProgressState(){this.error=null,this.completed=!1,this.progressVisible=!1,this.progressDialogClosed=!1}resetState(){this.resetProgressState(),this.resetStepsState()}async handleAction(e){}setActiveStepAsFailed(){for(const e of this.steps)if(e.active)return void(e.failed=!0)}async runAction(e){try{this.emitStarted(),this.resetState(),this.progressVisible=!0,await this.handleAction(e),this.completed=!0,await this.delayCompletedAction(),this.progressVisible=!1,this.emitCompleted()}catch(t){this.setActiveStepAsFailed(),this.error=t,this.emitFailed(t)}}async delayCompletedAction(){await new Promise((e=>setTimeout(e,this.completionDelayTimeout)))}closeProgressDialog(){this.dialogClosable&&(this.progressDialogClosed=!0,this.emitDialogClosed())}render(e){var t,s;const{runAction:o,confirmButtonLabel:r,steps:a,completed:i,error:d,dialogClosable:l}=this,p=e(h,{props:{steps:a,completed:i,error:d}}),c=e(n.EB,`${this.dialogTitle}`),u=e(n.ZB,[p]),_=this.progressVisible&&!this.progressDialogClosed,f=e(m.Z,{props:{visible:_,hideClose:!l},on:{close:this.closeProgressDialog}},[c,u]),A=null===(t=(s=this.$scopedSlots).default)||void 0===t?void 0:t.call(s,{runAction:o,confirmButtonLabel:r}),g=!this.progressVisible||this.showProgressInDialog,k=g?[null===A||void 0===A?void 0:A[0]]:[];return this.progressVisible&&k.push(this.showProgressInDialog?f:p),e("div",k)}emitStarted(){}emitCompleted(){}emitFailed(e){return e}emitDialogClosed(){}};(0,o.__decorate)([(0,r.fI)({type:Boolean,default:!1})],f.prototype,"showProgressInDialog",void 0),(0,o.__decorate)([(0,r.fI)({type:String,default:""})],f.prototype,"dialogTitle",void 0),(0,o.__decorate)([(0,r.fI)({required:!1})],f.prototype,"fixedRunOptions",void 0),(0,o.__decorate)([(0,r.fI)({type:Number,default:5e3})],f.prototype,"completionDelayTimeout",void 0),(0,o.__decorate)([(0,r.y1)("started")],f.prototype,"emitStarted",null),(0,o.__decorate)([(0,r.y1)("completed")],f.prototype,"emitCompleted",null),(0,o.__decorate)([(0,r.y1)("failed")],f.prototype,"emitFailed",null),(0,o.__decorate)([(0,r.y1)("dialogClosed")],f.prototype,"emitDialogClosed",null),f=(0,o.__decorate)([r.wA],f);const A=f},44036:(e,t,s)=>{e.exports=s.p+"img/done.d303a316.svg"}}]);