(globalThis["webpackChunkraiden_dapp"]=globalThis["webpackChunkraiden_dapp"]||[]).push([[812],{9226:(t,e,a)=>{"use strict";a.d(e,{Z:()=>_});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"amount-display",class:{"amount-display--inline":t.inline,"amount-display--full-width":t.fullWidth},on:{mouseover:function(e){t.exactAmount&&(t.displayExactAmount=!0)},mouseleave:function(e){t.exactAmount&&(t.displayExactAmount=!1)}}},[t.showLabel?a("span",{staticClass:"amount-display__label"},[t._v(" "+t._s(t.label)+" ")]):t._e(),t._t("default",(function(){return[a("span",{staticClass:"amount-display__formatted-amount",class:{"amount-display__formatted-amount--warning":t.warning}},[t._v(" "+t._s(t.formattedAmount)+" ")])]}))],2)},i=[],o=a(59312),s=a(3922),r=a(57102),c=a(93840);let d=class extends r.w3{constructor(){super(...arguments),this.displayExactAmount=!1}get showLabel(){return void 0!==this.label}get exactAmountValue(){const t=s.O$.from(this.amount);return c.Z.toUnits(t,this.token.decimals)}get roundedAmountValue(){const t=s.O$.from(this.amount);return c.Z.displayFormat(t,this.token.decimals)}get formattedAmount(){let t=this.sign;return t+=this.displayExactAmount?this.exactAmountValue:this.roundedAmountValue,t+=" "+this.token.symbol,t}};(0,o.__decorate)([(0,r.fI)({required:!1,default:!1,type:Boolean})],d.prototype,"exactAmount",void 0),(0,o.__decorate)([(0,r.fI)({type:String,required:!1})],d.prototype,"label",void 0),(0,o.__decorate)([(0,r.fI)({required:!0})],d.prototype,"amount",void 0),(0,o.__decorate)([(0,r.fI)({type:String,default:""})],d.prototype,"sign",void 0),(0,o.__decorate)([(0,r.fI)({required:!0})],d.prototype,"token",void 0),(0,o.__decorate)([(0,r.fI)({required:!1,default:!1,type:Boolean})],d.prototype,"inline",void 0),(0,o.__decorate)([(0,r.fI)({type:Boolean,default:!1})],d.prototype,"fullWidth",void 0),(0,o.__decorate)([(0,r.fI)({type:Boolean,default:!1})],d.prototype,"warning",void 0),d=(0,o.__decorate)([r.wA],d);const l=d,u=l;var p=a(79917),h=(0,p.Z)(u,n,i,!1,null,"97172a00",null);const _=h.exports},63606:(t,e,a)=>{"use strict";a.d(e,{Z:()=>T});var n,i=a(23399),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("raiden-dialog",{attrs:{visible:t.visible},on:{close:t.cancel}},[t.error?t._e():a(i.EB,[t._v(" "+t._s(t.$t("udc-deposit-dialog.title"))+" ")]),t.error?t._e():a(i.Qq,{staticClass:"udc-deposit-dialog__balance"},[t._v(" "+t._s(t.$t("udc-deposit-dialog.available-utility-token",{utilityTokenSymbol:t.udcToken.symbol,utilityTokenBalance:t.utilityTokenBalance}))+" ")]),a(i.ZB,[t.loading||t.error?t.error?a("error-message",{attrs:{error:t.error}}):a("div",{staticClass:"udc-deposit-dialog--progress"},[a("spinner"),t.currentStepDescription?a("span",[t._v(" "+t._s(t.currentStepDescription)+" ")]):t._e()],1):a("amount-input",{attrs:{token:t.udcToken,placeholder:t.$t("transfer.amount-placeholder")},model:{value:t.defaultUtilityTokenAmount,callback:function(e){t.defaultUtilityTokenAmount=e},expression:"defaultUtilityTokenAmount"}}),!t.mainnet||t.loading||t.error?t._e():a("a",{staticClass:"udc-deposit-dialog--uniswap-url",attrs:{href:t.uniswapURL,target:"_blank"}},[t._v(" "+t._s(t.$t("udc-deposit-dialog.uniswap-url-title"))+" ")])],1),t.error?t._e():a(i.h7,[a("action-button",{staticClass:"udc-deposit-dialog__action",attrs:{arrow:"","full-width":"",enabled:t.valid&&!t.loading,text:t.$t(t.mainnet?"udc-deposit-dialog.button-main":"udc-deposit-dialog.button"),"data-cy":"udc_deposit_dialog_action"},on:{click:function(e){return t.udcDeposit()}}})],1)],1)},s=[],r=a(59312),c=a(43535),d=a(5733),l=a(57102),u=a(77382),p=a(90878),h=a(80300),_=a(81327),m=a(7648),w=a(94813),g=a(54928),y=a(93840),v=a(55679);(function(t){t["MINT"]="mint",t["APPROVE"]="approve",t["DEPOSIT"]="deposit",t["NONE"]="none"})(n||(n={}));let f=class extends l.w3{constructor(){super(...arguments),this.uniswapURL="",this.defaultUtilityTokenAmount="",this.step=n.NONE,this.loading=!1,this.error=null}cancel(){this.error=null}get utilityTokenBalance(){return y.Z.displayFormat(this.udcToken.balance,this.udcToken.decimals)}get valid(){let t;try{t=c.vz(this.defaultUtilityTokenAmount,this.udcToken.decimals)}catch(e){return!1}return this.mainnet?t.lte(this.udcToken.balance)&&t.gt(d._Y):t.gt(d._Y)}get currentStepDescription(){if(this.step===n.NONE)return"";{const t=`udc-deposit-dialog.progress.${this.step.toString()}`;return this.$t(t,{currency:this.udcToken.symbol})}}mounted(){var t;const e=null!==(t=this.$raiden.getMainAccount())&&void 0!==t?t:this.$raiden.getAccount(),a=c.dF(p.O6.mul(2));this.uniswapURL=`https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency=${this.udcToken.address}&exactAmount=${a}&exactField=outPUT&recipient=${e}`,this.defaultUtilityTokenAmount=this.mainnet?this.utilityTokenBalance:a}async udcDeposit(){this.error=null,this.loading=!0;const t=this.udcToken,e=v.D.parse(this.defaultUtilityTokenAmount,t.decimals);try{!this.mainnet&&e.gt(t.balance)&&(this.step=n.MINT,await this.$raiden.mint(t.address,e)),this.step=n.APPROVE,await this.$raiden.depositToUDC(e,(()=>{this.step=n.DEPOSIT})),this.$emit("done")}catch(a){this.error=a}this.step=n.NONE,this.loading=!1}};(0,r.__decorate)([(0,l.fI)({required:!0,type:Boolean})],f.prototype,"visible",void 0),(0,r.__decorate)([(0,l.y1)()],f.prototype,"cancel",null),f=(0,r.__decorate)([(0,l.wA)({components:{ActionButton:h.Z,RaidenDialog:m.Z,ErrorMessage:w.Z,Spinner:g.Z,AmountInput:_.Z},computed:{...(0,u.rn)("userDepositContract",{udcToken:"token"}),...(0,u.Se)(["mainnet"])}})],f);const k=f,b=k;var C=a(79917),A=(0,C.Z)(b,o,s,!1,null,"c3777994",null);const T=A.exports},40812:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>z});var n=a(97660),i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"udc",attrs:{"data-cy":"udc"}},[i("div",{staticClass:"udc__content-box"},[i("amount-display",{staticClass:"udc__amount",attrs:{amount:t.udcCapacity,token:t.udcToken}}),i("div",[t._v(" "+t._s(t._f("upperCase")(t.$t("udc.balance")))+" ")]),t.hasEnoughServiceTokens?t._e():i("div",{staticClass:"udc__content-box udc__content-box--nested"},[i(n.Z,{attrs:{color:"#84878A",size:"16px"}},[t._v("mdi-alert-outline")]),i("span",[t._v(" "+t._s(t.$t("udc.balance-too-low",{minAmount:t.minAmount,tokenSymbol:t.serviceTokenSymbol}))+" ")])],1)],1),i("div",{staticClass:"udc__actions"},[i("div",{staticClass:"udc__actions__button",attrs:{"data-cy":"udc__actions__button__deposit"},on:{click:function(e){t.showUdcDeposit=!0}}},[i("img",{attrs:{src:a(50939)}}),t._v(" "+t._s(t.$t("udc.deposit"))+" ")]),i("div",{staticClass:"udc__actions__button",attrs:{"data-cy":"udc__actions__button__withdrawal"},on:{click:function(e){t.withdrawFromUdc=!0}}},[i("img",{attrs:{src:a(63057)}}),t._v(" "+t._s(t.$t("udc.withdrawal"))+" ")])]),i("div",{staticClass:"udc__content-box"},[i("div",{staticClass:"udc__content-box__header"},[t._v(" "+t._s(t.$t("udc.withdrawal-header"))+" ")]),i("planned-udc-withdrawal-information",{attrs:{"planned-withdrawal":t.plannedUdcWithdrawal,"udc-token":t.udcToken,"block-number":t.blockNumber}})],1),i("udc-deposit-dialog",{attrs:{visible:t.showUdcDeposit},on:{cancel:function(e){t.showUdcDeposit=!1},done:function(e){return t.mintDone()}}}),i("udc-withdrawal-dialog",{attrs:{visible:t.withdrawFromUdc,"account-balance":t.relevantEthBalanceForWithdrawal,token:t.udcToken,capacity:t.udcCapacity},on:{cancel:function(e){t.withdrawFromUdc=!1}}})],1)},o=[],s=a(59312),r=a(43535),c=a(5733),d=a(57102),l=a(77382),u=a(90878),p=a(80300),h=a(9226),_=a(63606),m=a(23399),w=a(55429),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("raiden-dialog",{staticClass:"udc-withdrawal-dialog",attrs:{visible:t.visible,"data-cy":"udc-withdrawal-dialog"},on:{close:t.cancel}},[n(m.EB,[t._v(t._s(t.$t("udc.withdrawal")))]),n(m.ZB,[t.inProgress?n("spinner",{staticClass:"udc-withdrawal-dialog__progress"}):t.error?n("error-message",{attrs:{error:t.error}}):t.isDone?[n(w.Z,{staticClass:"udc-withdrawal-dialog__done my-4",attrs:{src:a(44036)}}),n("span",[t._v(t._s(t.$t("udc.withdrawal-planned")))])]:[n("amount-input",{staticClass:"udc-withdrawal-dialog__amount",attrs:{"data-cy":"udc-withdrawal-dialog__amount",token:t.tokenWithAsteriskAtSymbol,placeholder:t.$t("transfer.amount-placeholder"),autofocus:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),n("div",{staticClass:"udc-withdrawal-dialog__available-eth",class:{"udc-withdrawal-dialog__available-eth--too-low":t.accountBalanceTooLow}},[t._v(" "+t._s(t._f("upperCase")(t.$t("udc-deposit-dialog.available-eth",{balance:t.accountBalance,currency:t.$t("app-header.currency")})))+" ")])]],2),t.error||t.isDone?t._e():n(m.h7,{staticClass:"flex-column"},[n("action-button",{staticClass:"udc-withdrawal-dialog__button",attrs:{"data-cy":"udc-withdrawal-dialog__button",enabled:t.isValid&&!t.accountBalanceTooLow,text:t.$t("general.buttons.confirm"),"full-width":""},on:{click:t.planWithdraw}}),t.error?t._e():n("span",{staticClass:"mt-2"},[n("sup",[t._v(t._s(t.$t("udc.asterisk")))]),t._v(" "+t._s(t.$t("udc.withdrawal-footnote"))+" ")])],1)],1)},y=[],v=a(81327),f=a(7648),k=a(94813),b=a(54928),C=a(55679);let A=class extends d.w3{constructor(){super(...arguments),this.amount="0",this.inProgress=!1,this.error=null,this.isDone=!1}done(){this.isDone=!0,setTimeout((()=>{this.isDone=!1,this.cancel()}),5e3)}get accountBalanceTooLow(){return C.D.parse(this.accountBalance,18).lte(c._Y)}get tokenWithAsteriskAtSymbol(){return{...this.token,symbol:this.token.symbol+"*"}}get withdrawAmount(){let t;try{t=r.vz(this.amount,this.token.decimals)}catch(e){t=c._Y}return t}get isValid(){if(this.inProgress)return!1;const t=this.withdrawAmount;return t.gt(c._Y)&&t.lte(this.capacity)}async planWithdraw(){this.inProgress=!0;try{await this.$raiden.planUDCWithdraw(this.withdrawAmount),this.done()}catch(t){this.error=t}finally{this.inProgress=!1}}cancel(){this.isDone=!1,this.inProgress=!1,this.error=null,this.amount="0"}};(0,s.__decorate)([(0,d.fI)({required:!0,type:Boolean})],A.prototype,"visible",void 0),(0,s.__decorate)([(0,d.fI)({required:!0,type:String})],A.prototype,"accountBalance",void 0),(0,s.__decorate)([(0,d.fI)({required:!0})],A.prototype,"token",void 0),(0,s.__decorate)([(0,d.fI)({required:!0})],A.prototype,"capacity",void 0),(0,s.__decorate)([(0,d.y1)()],A.prototype,"cancel",null),A=(0,s.__decorate)([(0,d.wA)({components:{ErrorMessage:k.Z,RaidenDialog:f.Z,AmountInput:v.Z,ActionButton:p.Z,Spinner:b.Z},computed:{...(0,l.rn)("userDepositContract",{udcToken:"token"})}})],A);const T=A,x=T;var D=a(79917),$=(0,D.Z)(x,g,y,!1,null,"4cce3ecf",null);const U=$.exports;var B=a(41541),Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"planned-udc-withdrawal-information d-flex justify-center align-center px-2",class:{"planned-udc-withdrawal-information--no-progress":t.noWithdrawInProgress,"planned-udc-withdrawal-information--pending":t.isPending,"planned-udc-withdrawal-information--ready":t.isReady}},[t.noWithdrawInProgress?[t._v(" "+t._s(t._f("upperCase")(t.$t("udc.information.no-withdrawal-in-progress")))+" ")]:[n("img",{staticClass:"planned-udc-withdrawal-information__status-icon mr-2",attrs:{src:a(53980)("./status-icon-"+t.statusIconName+".svg"),width:"13px",height:"13px"}}),n("amount-display",{staticClass:"planned-udc-withdrawal-information__amount",attrs:{token:t.udcToken,amount:t.plannedWithdrawal.amount}}),n(B.Z),t.isPending?n("span",{staticClass:"planned-udc-withdrawal-information__message"},[t._v(" "+t._s(t.remainingBlocksUntilReady)+" "+t._s(t._f("upperCase")(t.$t("udc.information.pending-message")))+" ")]):t._e(),t.isReady?n("span",{staticClass:"planned-udc-withdrawal-information__message"},[t._v(" "+t._s(t._f("upperCase")(t.$t("udc.information.ready-message")))+" ")]):t._e()]],2)},E=[],I=a(55093);let S=class extends I.Z{constructor(){super(...arguments),this.assetSourceDirectory="@/assets/planned-udc-withdrawal"}get noWithdrawInProgress(){return void 0===this.plannedWithdrawal}get isPending(){return void 0!==this.plannedWithdrawal&&this.remainingBlocksUntilReady>0}get isReady(){return void 0!==this.plannedWithdrawal&&this.remainingBlocksUntilReady<=0}get remainingBlocksUntilReady(){return void 0!==this.plannedWithdrawal?this.plannedWithdrawal.withdrawBlock-this.blockNumber:0}get statusIconName(){return this.isReady?"ready":this.isPending?"pending":""}};(0,s.__decorate)([(0,d.fI)()],S.prototype,"plannedWithdrawal",void 0),(0,s.__decorate)([(0,d.fI)({required:!0})],S.prototype,"udcToken",void 0),(0,s.__decorate)([(0,d.fI)({required:!0})],S.prototype,"blockNumber",void 0),S=(0,s.__decorate)([(0,d.wA)({components:{AmountDisplay:h.Z}})],S);const W=S,P=W;var N=(0,D.Z)(P,Z,E,!1,null,null,null);const R=N.exports,{mapState:O}=(0,l._p)("userSettings"),{mapState:q}=(0,l._p)("userDepositContract"),F=10;let L=class extends d.w3{constructor(){super(...arguments),this.amount=r.dF(u.O6.mul(2)),this.minAmount=+r.dF(u.O6.add(u.O6.mul(F).div(100))),this.udcCapacity=c._Y,this.hasEnoughServiceTokens=!1,this.showUdcDeposit=!1,this.withdrawFromUdc=!1}get serviceTokenSymbol(){var t;return null!==(t=this.udcToken.symbol)&&void 0!==t?t:this.mainnet?"RDN":"SVT"}get relevantEthBalanceForWithdrawal(){return this.useRaidenAccount?this.raidenAccountBalance:this.accountBalance}async mounted(){await this.updateUDCCapacity()}async updateUDCCapacity(){const{monitoringReward:t}=this.$raiden;this.udcCapacity=await this.$raiden.getUDCCapacity(),this.hasEnoughServiceTokens=!(!t||!this.udcCapacity.gte(t))}async mintDone(){this.showUdcDeposit=!1,await this.updateUDCCapacity()}};L=(0,s.__decorate)([(0,d.wA)({components:{ActionButton:p.Z,UdcDepositDialog:_.Z,UdcWithdrawalDialog:U,AmountDisplay:h.Z,ErrorMessage:k.Z,Spinner:b.Z,PlannedUdcWithdrawalInformation:R},computed:{...(0,l.rn)(["blockNumber","accountBalance","raidenAccountBalance"]),...O(["useRaidenAccount"]),...q({udcToken:"token",plannedUdcWithdrawal:"plannedWithdrawal"}),...(0,l.Se)(["mainnet"])}})],L);const V=L,M=V;var Y=(0,D.Z)(M,i,o,!1,null,"a9ebbb4a",null);const z=Y.exports},41541:(t,e,a)=>{"use strict";a.d(e,{Z:()=>i});a(7249);var n=a(64171);const i=(0,n.Ji)("spacer","div","v-spacer")},53980:(t,e,a)=>{var n={"./status-icon-pending.svg":50184,"./status-icon-ready.svg":11272};function i(t){var e=o(t);return a(e)}function o(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id=53980},44036:(t,e,a)=>{"use strict";t.exports=a.p+"img/done.d303a316.svg"},50939:(t,e,a)=>{"use strict";t.exports=a.p+"img/icon-deposit.a683dd92.svg"},63057:(t,e,a)=>{"use strict";t.exports=a.p+"img/icon-withdraw.72a53756.svg"},50184:(t,e,a)=>{"use strict";t.exports=a.p+"img/status-icon-pending.a9957e3f.svg"},11272:(t,e,a)=>{"use strict";t.exports=a.p+"img/status-icon-ready.24cdc077.svg"}}]);