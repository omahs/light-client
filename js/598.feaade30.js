"use strict";(globalThis["webpackChunkraiden_dapp"]=globalThis["webpackChunkraiden_dapp"]||[]).push([[598],{26598:(e,t,r)=>{r.d(t,{BH:()=>o,EB:()=>f,cy:()=>h,uY:()=>n.uY,zB:()=>n.zB});var s=r(46678),i=(r(45776),r(98026)),a=r(90446),n=r(55452);function o(e,t){var r=t.keys,i={offset:t.skip};return Promise.all(r.map((function(r){var a=(0,s.f0)({key:r,deleted:"ok"},t);return["limit","skip","keys"].forEach((function(e){delete a[e]})),new Promise((function(s,n){e._allDocs(a,(function(e,a){if(e)return n(e);t.update_seq&&void 0!==a.update_seq&&(i.update_seq=a.update_seq),i.total_rows=a.total_rows,s(a.rows[0]||{key:r,error:"not_found"})}))}))}))).then((function(e){return i.rows=e,i}))}function d(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})}var u=d(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),l=d(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function v(e){if(!/^\d+-/.test(e))return(0,a.Tr)(a.Dq);var t=e.indexOf("-"),r=e.substring(0,t),s=e.substring(t+1);return{prefix:parseInt(r,10),id:s}}function p(e,t){for(var r=e.start-e.ids.length+1,s=e.ids,i=[s[0],t,[]],a=1,n=s.length;a<n;a++)i=[s[a],{status:"missing"},[i]];return[{pos:r,ids:i}]}function f(e,t,r){var i,n,o;r||(r={deterministic_revs:!0});var d={status:"available"};if(e._deleted&&(d.deleted=!0),t)if(e._id||(e._id=(0,s.Vj)()),n=(0,s.OD)(e,r.deterministic_revs),e._rev){if(o=v(e._rev),o.error)return o;e._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[n,d,[]]]]}],i=o.prefix+1}else e._rev_tree=[{pos:1,ids:[n,d,[]]}],i=1;else if(e._revisions&&(e._rev_tree=p(e._revisions,d),i=e._revisions.start,n=e._revisions.ids[0]),!e._rev_tree){if(o=v(e._rev),o.error)return o;i=o.prefix,n=o.id,e._rev_tree=[{pos:i,ids:[n,d,[]]}]}(0,s.GE)(e._id),e._rev=i+"-"+n;var f={metadata:{},data:{}};for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var _="_"===c[0];if(_&&!u[c]){var h=(0,a.Tr)(a.cI,c);throw h.message=a.cI.message+": "+c,h}_&&!l[c]?f.metadata[c.slice(1)]=e[c]:f.data[c]=e[c]}return f}function c(e,t,r,s,i,o,d,u){if((0,n.FS)(t.rev_tree,r.metadata.rev)&&!u)return s[i]=r,o();var l=t.winningRev||(0,n.S)(t),v="deleted"in t?t.deleted:(0,n.uY)(t,l),p="deleted"in r.metadata?r.metadata.deleted:(0,n.uY)(r.metadata),c=/^1-/.test(r.metadata.rev);if(v&&!p&&u&&c){var _=r.data;_._rev=l,_._id=r.metadata.id,r=f(_,u)}var h=(0,n.TS)(t.rev_tree,r.metadata.rev_tree[0],e),m=u&&(v&&p&&"new_leaf"!==h.conflicts||!v&&"new_leaf"!==h.conflicts||v&&!p&&"new_branch"===h.conflicts);if(m){var g=(0,a.Tr)(a.gW);return s[i]=g,o()}var w=r.metadata.rev;r.metadata.rev_tree=h.tree,r.stemmedRevs=h.stemmedRevs||[],t.rev_map&&(r.metadata.rev_map=t.rev_map);var b,y=(0,n.S)(r.metadata),k=(0,n.uY)(r.metadata,y),x=v===k?0:v<k?-1:1;b=w===y?k:(0,n.uY)(r.metadata,w),d(r,y,k,b,!0,x,i,o)}function _(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}function h(e,t,r,s,o,d,u,l,v){function p(e,t,r){var s=(0,n.S)(e.metadata),i=(0,n.uY)(e.metadata,s);if("was_delete"in l&&i)return d[t]=(0,a.Tr)(a.Uc,"deleted"),r();var o=f&&_(e);if(o){var v=(0,a.Tr)(a.gW);return d[t]=v,r()}var p=i?0:1;u(e,s,i,i,!1,p,t,r)}e=e||1e3;var f=l.new_edits,h=new i.D,m=0,g=t.length;function w(){++m===g&&v&&v()}t.forEach((function(e,t){if(e._id&&(0,n.zB)(e._id)){var s=e._deleted?"_removeLocal":"_putLocal";r[s](e,{ctx:o},(function(e,r){d[t]=e||r,w()}))}else{var i=e.metadata.id;h.has(i)?(g--,h.get(i).push([e,t])):h.set(i,[[e,t]])}})),h.forEach((function(t,r){var i=0;function a(){++i<t.length?o():w()}function o(){var o=t[i],l=o[0],v=o[1];if(s.has(r))c(e,s.get(r),l,d,v,a,u,f);else{var _=(0,n.TS)([],l.metadata.rev_tree[0],e);l.metadata.rev_tree=_.tree,l.stemmedRevs=_.stemmedRevs||[],p(l,v,a)}}o()}))}},55452:(e,t,r)=>{function s(e){var t,r,s,i,a=e.rev_tree.slice();while(i=a.pop()){var n=i.ids,o=n[2],d=i.pos;if(o.length)for(var u=0,l=o.length;u<l;u++)a.push({pos:d+1,ids:o[u]});else{var v=!!n[1].deleted,p=n[0];t&&!(s!==v?s:r!==d?r<d:t<p)||(t=p,r=d,s=v)}}return r+"-"+t}function i(e,t){var r,s=e.slice();while(r=s.pop())for(var i=r.pos,a=r.ids,n=a[2],o=t(0===n.length,i,a[0],r.ctx,a[1]),d=0,u=n.length;d<u;d++)s.push({pos:i+1,ids:n[d],ctx:o})}function a(e,t){return e.pos-t.pos}function n(e){var t=[];i(e,(function(e,r,s,i,a){e&&t.push({rev:r+"-"+s,pos:r,opts:a})})),t.sort(a).reverse();for(var r=0,s=t.length;r<s;r++)delete t[r].pos;return t}function o(e){for(var t=s(e),r=n(e.rev_tree),i=[],a=0,o=r.length;a<o;a++){var d=r[a];d.rev===t||d.opts.deleted||i.push(d.rev)}return i}function d(e){var t=[];return i(e.rev_tree,(function(e,r,s,i,a){"available"!==a.status||e||(t.push(r+"-"+s),a.status="missing")})),t}function u(e){var t,r=[],s=e.slice();while(t=s.pop()){var i=t.pos,a=t.ids,n=a[0],o=a[1],d=a[2],u=0===d.length,l=t.history?t.history.slice():[];l.push({id:n,opts:o}),u&&r.push({pos:i+1-l.length,ids:l});for(var v=0,p=d.length;v<p;v++)s.push({pos:i+1,ids:d[v],history:l})}return r.reverse()}function l(e,t){return e.pos-t.pos}function v(e,t,r){var s,i=0,a=e.length;while(i<a)s=i+a>>>1,r(e[s],t)<0?i=s+1:a=s;return i}function p(e,t,r){var s=v(e,t,r);e.splice(s,0,t)}function f(e,t){for(var r,s,i=t,a=e.length;i<a;i++){var n=e[i],o=[n.id,n.opts,[]];s?(s[2].push(o),s=o):r=s=o}return r}function c(e,t){return e[0]<t[0]?-1:1}function _(e,t){var r=[{tree1:e,tree2:t}],s=!1;while(r.length>0){var i=r.pop(),a=i.tree1,n=i.tree2;(a[1].status||n[1].status)&&(a[1].status="available"===a[1].status||"available"===n[1].status?"available":"missing");for(var o=0;o<n[2].length;o++)if(a[2][0]){for(var d=!1,u=0;u<a[2].length;u++)a[2][u][0]===n[2][o][0]&&(r.push({tree1:a[2][u],tree2:n[2][o]}),d=!0);d||(s="new_branch",p(a[2],n[2][o],c))}else s="new_leaf",a[2][0]=n[2][o]}return{conflicts:s,tree:e}}function h(e,t,r){var s,i=[],a=!1,n=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var o=0,d=e.length;o<d;o++){var u=e[o];if(u.pos===t.pos&&u.ids[0]===t.ids[0])s=_(u.ids,t.ids),i.push({pos:u.pos,ids:s.tree}),a=a||s.conflicts,n=!0;else if(!0!==r){var v=u.pos<t.pos?u:t,p=u.pos<t.pos?t:u,f=p.pos-v.pos,c=[],h=[];h.push({ids:v.ids,diff:f,parent:null,parentIdx:null});while(h.length>0){var m=h.pop();if(0!==m.diff)for(var g=m.ids[2],w=0,b=g.length;w<b;w++)h.push({ids:g[w],diff:m.diff-1,parent:m.ids,parentIdx:w});else m.ids[0]===p.ids[0]&&c.push(m)}var y=c[0];y?(s=_(y.ids,p.ids),y.parent[2][y.parentIdx]=s.tree,i.push({pos:v.pos,ids:v.ids}),a=a||s.conflicts,n=!0):i.push(u)}else i.push(u)}return n||i.push(t),i.sort(l),{tree:i,conflicts:a||"internal_node"}}function m(e,t){for(var r,s,a=u(e),n=0,o=a.length;n<o;n++){var d,l=a[n],v=l.ids;if(v.length>t){r||(r={});var p=v.length-t;d={pos:l.pos+p,ids:f(v,p)};for(var c=0;c<p;c++){var _=l.pos+c+"-"+v[c].id;r[_]=!0}}else d={pos:l.pos,ids:f(v,0)};s=s?h(s,d,!0).tree:[d]}return r&&i(s,(function(e,t,s){delete r[t+"-"+s]})),{tree:s,revs:r?Object.keys(r):[]}}function g(e,t,r){var s=h(e,t),i=m(s.tree,r);return{tree:i.tree,stemmedRevs:i.revs,conflicts:s.conflicts}}function w(e,t){var r,s=e.slice(),i=t.split("-"),a=parseInt(i[0],10),n=i[1];while(r=s.pop()){if(r.pos===a&&r.ids[0]===n)return!0;for(var o=r.ids[2],d=0,u=o.length;d<u;d++)s.push({pos:r.pos+1,ids:o[d]})}return!1}function b(e){return e.ids}function y(e,t){t||(t=s(e));var r,i=t.substring(t.indexOf("-")+1),a=e.rev_tree.map(b);while(r=a.pop()){if(r[0]===i)return!!r[1].deleted;a=a.concat(r[2])}}function k(e){return/^_local/.test(e)}function x(e,t){var r,s=t.rev_tree.slice();while(r=s.pop()){var i=r.pos,a=r.ids,n=a[0],o=a[1],d=a[2],u=0===d.length,l=r.history?r.history.slice():[];if(l.push({id:n,pos:i,opts:o}),u)for(var v=0,p=l.length;v<p;v++){var f=l[v],c=f.pos+"-"+f.id;if(c===e)return i+"-"+n}for(var _=0,h=d.length;_<h;_++)s.push({pos:i+1,ids:d[_],history:l})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}r.d(t,{DJ:()=>o,FS:()=>w,S:()=>s,TS:()=>g,UB:()=>d,fE:()=>i,pA:()=>x,uY:()=>y,zB:()=>k})}}]);